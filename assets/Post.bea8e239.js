import{j as d,k as v,y as f,o as c,c as u,a as e,l as k,v as _,b as p,p as b,t as h}from"./index.95cd60ba.js";import{k as y,l as w}from"./metawall.2ba7c290.js";const x=e("h2",{class:"text-center border border-dark border-2 py-4 bg-white mb-4 position-relative border-overlap border-overlap-start fw-bold"},"\u5F35\u8CBC\u52D5\u614B",-1),g={class:"p-8 shadow-lg border border-dark border-2 rounded bg-white"},F=e("label",{for:"newsFeedTextarea",class:"mb-1 d-block"},"\u8CBC\u6587\u5167\u5BB9",-1),C={key:0,class:"mb-8"},D=["src","alt"],T={class:"d-flex justify-content-center"},V=["disabled"],B={key:0,class:"form-text"},I={setup(P){const s=d(""),r=d(null),l=v({}),n=d(""),m=async()=>{const i=await y().then(o=>o.data.data._id),a=Array.from(r.value.files),t=new FormData;a.forEach(o=>{t.append("photos",o)}),t.append("user",i),t.append("content",s.value),l.link="",s.value="",w(t,{mimeType:"multipart/form-data"}).then(o=>{o.data.status==="success"&&(n.value="success")})};return f(s,i=>{n.value=""}),(i,a)=>(c(),u("div",null,[x,e("div",g,[F,k(e("textarea",{"onUpdate:modelValue":a[0]||(a[0]=t=>s.value=t),name:"",id:"newsFeedTextarea",cols:"30",rows:"10",class:"w-100 mb-4 border border-dark border-2"},null,512),[[_,s.value]]),e("input",{ref_key:"imageFile",ref:r,type:"file",name:"photos",class:"d-none btn btn-dark px-8 py-1 mb-4",multiple:"multiple"},null,512),e("input",{type:"button",value:"\u4E0A\u50B3\u5716\u7247",class:"btn btn-dark px-8 py-1 mb-4",onClick:a[1]||(a[1]=t=>r.value.click())}),p(l).link?(c(),u("div",C,[e("img",{src:p(l).link,alt:p(l).name,class:"img-fluid"},null,8,D)])):b("",!0),e("div",T,[e("input",{type:"button",class:"w-50 mx-auto py-4 btn btn-secondary bg-black-50",value:"\u9001\u51FA\u8CBC\u6587",onClick:m,disabled:!s.value},null,8,V),n.value?(c(),u("div",B,h(n.value),1)):b("",!0)])])]))}};export{I as default};
